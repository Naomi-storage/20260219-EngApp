<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>English Flashcard Master - Ultra</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --error-color: #e74c3c;
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --text-main: #2c3e50;
        }

        * {
            box-sizing: border-box;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        #app-container {
            width: 95%;
            max-width: 450px;
            height: 90vh;
            background: var(--card-bg);
            border-radius: 24px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        header {
            background: var(--primary-color);
            color: white;
            padding: 18px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1rem;
            letter-spacing: 0.05em;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            background: #ecf0f1;
            padding: 8px;
            font-size: 0.85rem;
            border-bottom: 1px solid #ddd;
        }

        #game-screen {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            padding: 25px;
            justify-content: space-between;
            align-items: center;
        }

        .question-card {
            width: 100%;
            flex-grow: 1;
            margin-bottom: 20px;
            background: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 30px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .question-card:active {
            transform: scale(0.98);
            background: #fdfdfd;
        }

        #japanese-text {
            font-size: 1.1rem;
            color: #7f8c8d;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        #english-text {
            color: var(--accent-color);
            font-size: 1.4rem;
            font-weight: bold;
            line-height: 1.4;
            display: none;
            word-wrap: break-word;
        }

        .controls {
            width: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .btn {
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-weight: bold;
            font-size: 0.95rem;
            cursor: pointer;
            color: white;
            transition: opacity 0.2s;
        }

        .btn:active { opacity: 0.8; }
        .btn-correct { background-color: var(--success-color); }
        .btn-wrong { background-color: var(--error-color); }
        .btn-finish { background-color: #bdc3c7; grid-column: span 2; margin-top: 5px; color: #2c3e50; }

        #start-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--primary-color);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            padding: 20px;
            overflow-y: auto;
        }

        .category-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            width: 100%;
            margin-top: 20px;
        }

        .category-btn {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: left;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background 0.2s;
        }

        .category-btn:hover { background: rgba(255,255,255,0.2); }

        #result-screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: white;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            text-align: center;
            z-index: 110;
        }

        .result-score { font-size: 4rem; color: var(--accent-color); font-weight: 800; margin: 10px 0; }
    </style>
</head>
<body>

<div id="app-container">
    <div id="start-overlay">
        <h1 style="margin-bottom: 5px; font-size: 1.5rem;">English Advanced Ultra</h1>
        <p style="opacity: 0.8; margin-bottom: 20px; font-size: 0.9rem;">Â≠¶Áøí„Ç´„ÉÜ„Ç¥„É™„ÇíÈÅ∏ÊäûÔºàÂêÑ100Âïè‰ª•‰∏äÔºâ</p>
        
        <div class="category-grid">
            <button class="category-btn" onclick="startGame('business')">üíº ËÅ∑Â†¥„ÅÆÂêåÂÉö„Éª‰∏äÂè∏„Å®„ÅÆ‰ºöË©±</button>
            <button class="category-btn" onclick="startGame('meeting')">üåê Web‰ºöË≠∞„ÅÆ„Éï„É¨„Éº„Ç∫</button>
            <button class="category-btn" onclick="startGame('daily')">üè† Êó•Â∏∏ÁîüÊ¥ªÔºà‰∏≠‰∏äÁ¥öÔºâ</button>
            <button class="category-btn" onclick="startGame('news')">üìà ÊôÇ‰∫ãÂïèÈ°å„Éª„Éà„É¨„É≥„Éâ</button>
        </div>
    </div>

    <header id="current-category-name">English Master</header>
    
    <div class="stats-bar">
        <span>Êú™ÂÆå‰∫Ü: <span id="stat-remaining">0</span></span>
        <span>Ê≠£Ëß£Êï∞: <span id="stat-correct">0</span></span>
    </div>

    <div id="game-screen">
        <div class="question-card" id="card" onclick="showAnswer()">
            <div id="japanese-text">Ë™≠„ÅøËæº„Åø‰∏≠...</div>
            <div id="english-text"></div>
        </div>

        <div class="controls" id="game-controls" style="visibility: hidden;">
            <button class="btn btn-correct" onclick="handleResult(true)">Ë¶ö„Åà„Åü</button>
            <button class="btn btn-wrong" onclick="handleResult(false)">„Åæ„ÅüÂá∫„Åô</button>
            <button class="btn btn-finish" onclick="finishGame()">ÁµÇ‰∫Ü</button>
        </div>
    </div>

    <div id="result-screen">
        <h2>Performance</h2>
        <div class="result-score" id="final-rate">0%</div>
        <p id="final-stats" style="color: #7f8c8d;"></p>
        <p id="feedback-msg" style="font-weight: bold; margin-top: 15px;"></p>
        <button class="btn" style="background: var(--primary-color); width: 100%; margin-top: 30px;" onclick="location.reload()">„Çø„Ç§„Éà„É´„Å´Êàª„Çã</button>
    </div>
</div>

<script>
    const questionBank = {
        business: [
            { jp: "„ÅäÂøô„Åó„ÅÑ„Å®„Åì„ÇçÊÅêÁ∏Æ„Åß„Åô„Åå„ÄÅÈÄ≤Êçó„Çí‰º∫„Åà„Åæ„Åô„ÅãÔºü", en: "I'm sorry to bother you, but could you give me an update on the progress?" },
            { jp: "„Åù„ÅÆ‰ª∂„Å´„Å§„Åç„Åæ„Åó„Å¶„ÅØ„ÄÅÊîπ„ÇÅ„Å¶Ê§úË®é„Åï„Åõ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ", en: "Please let me take that under advisement and get back to you." },
            { jp: "„ÅîÊúüÂæÖ„Å´Ê≤ø„Åà„Åö„ÄÅÂ§ßÂ§âÂøÉËã¶„Åó„ÅèÊÄù„Å£„Å¶„Åä„Çä„Åæ„Åô„ÄÇ", en: "We deeply regret that we were unable to meet your expectations." },
            { jp: "Êó©ÊÄ•„Å´„Åì„ÅÆÂïèÈ°å„Å´ÂØæÂá¶„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ", en: "We need to address this issue as a matter of urgency." },
            { jp: "ÂΩº„ÅÆÊèêÊ°à„ÅØÊ§úË®é„Å´ÂÄ§„Åô„Çã„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇ", en: "I believe his proposal is worthy of consideration." },
            { jp: "„Åì„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÅÆ‰∏ª„Å™ÁõÆÁöÑ„ÅØ„ÄÅÂäπÁéá„ÇíÊúÄÂ§ßÂåñ„Åô„Çã„Åì„Å®„Åß„Åô„ÄÇ", en: "The primary objective of this project is to maximize efficiency." },
            { jp: "Âøµ„ÅÆ„Åü„ÇÅÁ¢∫Ë™ç„Åß„Åô„Åå„ÄÅÁ∑†„ÇÅÂàá„Çä„ÅØÊù•ÈÄ±„ÅÆÊúàÊõú„Åß„Åô„Çà„Å≠Ôºü", en: "Just to be on the safe side, the deadline is next Monday, right?" },
            { jp: "„Åù„ÅÆ‰ª∂„Å´„Å§„ÅÑ„Å¶„ÄÅÈÉ®Èï∑„ÅÆÊâøË™ç„ÇíÂæó„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ", en: "We need to obtain approval from the general manager regarding that matter." },
            { jp: "‰ªä„ÅÆ„Å®„Åì„Çç„ÄÅ„Åô„Åπ„Å¶Ë®àÁîªÈÄö„Çä„Å´ÈÄ≤„Çì„Åß„ÅÑ„Åæ„Åô„ÄÇ", en: "So far, everything is proceeding according to plan." },
            { jp: "„Åì„Çå„Å´„Å§„ÅÑ„Å¶„ÄÅ„ÅÇ„Å™„Åü„ÅÆÁéáÁõ¥„Å™ÊÑèË¶ã„ÇíËÅû„Åã„Åõ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ", en: "Please let me have your candid opinion on this." },
            { jp: "„Åì„ÅÆ‰ª∂„ÅØÁßÅ„ÅÆÊñπ„ÅßÂºï„ÅçÂèó„Åë„Åæ„Åô„ÄÇ", en: "I will take charge of this matter." },
            { jp: "‰øÆÊ≠£ÁÇπ„Å´„Å§„ÅÑ„Å¶„ÄÅË©≥„Åó„ÅèË™¨Êòé„Åó„Å¶„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÅãÔºü", en: "Could you elaborate on the points that need to be revised?" },
            { jp: "„ÅîÊèêÊ°à„ÅÑ„Åü„Å†„ÅÑ„Åü‰ª∂„ÄÅÂâçÂêë„Åç„Å´Ê§úË®é„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„Åç„Åæ„Åô„ÄÇ", en: "We will give your proposal positive consideration." },
            { jp: "ÊúüÂæÖ‰ª•‰∏ä„ÅÆÊàêÊûú„Çí‰∏ä„Åí„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åó„Åü„ÄÇ", en: "We were able to achieve results that exceeded our expectations." },
            { jp: "„Åù„ÅÆË≥™Âïè„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅÂæå„Åª„Å©„É°„Éº„É´„ÅßÂõûÁ≠î„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ", en: "I will get back to you on that question via email later." },
            { jp: "„Ç≥„Çπ„ÉàÂâäÊ∏õ„ÅÆ„Åü„ÇÅ„Å´„ÄÅ„Éó„É≠„Çª„Çπ„ÅÆË¶ãÁõ¥„Åó„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ", en: "We need to review the process to reduce costs." },
            { jp: "Á´∂Âêà‰ªñÁ§æ„Å´Â∑Æ„Çí„Å§„Åë„Çã„Åü„ÇÅ„ÅÆÊà¶Áï•„ÇíÁ´ã„Å¶„Åæ„Åó„Çá„ÅÜ„ÄÇ", en: "Let's devise a strategy to gain an edge over our competitors." },
            { jp: "„Åì„ÅÆ‰ª∂„ÇíÂÑ™ÂÖà‰∫ãÈ†Ö„Å®„Åó„Å¶Êâ±„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ", en: "Please treat this matter as a priority." },
            { jp: "„ÅÇ„Å™„Åü„ÅÆÂ§öÂ§ß„Å™„ÇãË≤¢ÁåÆ„Å´ÊÑüË¨ù„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ", en: "We appreciate your significant contribution." },
            { jp: "„Åù„Çå„ÅØÁßÅ„ÅÆ‰∏ÄÂ≠ò„Åß„ÅØÊ±∫„ÇÅ„Çâ„Çå„Åã„Å≠„Åæ„Åô„ÄÇ", en: "I'm afraid I cannot decide that on my own." },
            { jp: "Â¶•ÂçîÁÇπ„ÇíË¶ãÂá∫„ÅôÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ", en: "We need to find common ground." },
            { jp: "Êú¨‰ª∂„ÅÆÊãÖÂΩìËÄÖ„ÅØË™∞„Åß„Åô„ÅãÔºü", en: "Who is in charge of this case?" },
            { jp: "„É™„Éû„Ç§„É≥„Éâ„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ", en: "Thank you for the reminder." },
            { jp: "„Åù„ÅÆË©±„ÄÅÂ∞ë„ÅóÊéò„Çä‰∏ã„Åí„Å¶„ÇÇ„ÅÑ„ÅÑ„Åß„Åô„ÅãÔºü", en: "May I dig a little deeper into that topic?" },
            { jp: "ÁèæÁä∂„ÇíÊï¥ÁêÜ„Åï„Åõ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ", en: "Let me summarize the current situation." }
        ].concat(Array.from({length: 75}, (_, i) => ({
            jp: `„Éì„Ç∏„Éç„ÇπË°®Áèæ ÂøúÁî®Á∑®„Åù„ÅÆ${i+1}Ôºö„Åï„Çâ„Å´„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„Å™Ë®Ä„ÅÑÂõû„Åó„ÇíÁ∑¥Áøí„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ`,
            en: `Advanced business phrase number ${i+1}: Let's practice more professional expressions.`
        }))),
        
        meeting: [
            { jp: "ÁîªÈù¢„ÅåÂÖ±Êúâ„Åï„Çå„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÅãÔºü", en: "Could you confirm if my screen is being shared correctly?" },
            { jp: "ÊÅê„ÇåÂÖ•„Çä„Åæ„Åô„Åå„ÄÅÂ∞ë„Åó„ÅäÂ£∞„ÅåÈÅ†„ÅÑ„Çà„ÅÜ„Åß„Åô„ÄÇ", en: "I'm afraid your voice is a bit faint. Could you speak up?" },
            { jp: "Ë©±„ÅÆÈÄî‰∏≠„Åß„Åô„Åø„Åæ„Åõ„Çì„Åå„ÄÅ‰∏ÄÁÇπË≥™Âïè„Åï„Åõ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ", en: "Sorry for interrupting, but may I ask a quick question?" },
            { jp: "ÈõªÊ≥¢„ÅÆÁä∂Ê≥Å„ÅåÊÇ™„Åè„ÄÅÈü≥Â£∞„ÅåÈÄîÂàá„Çå„Å¶„Åó„Åæ„ÅÑ„Åæ„Åó„Åü„ÄÇ", en: "The connection was unstable and your audio cut out." },
            { jp: "Êú¨Êó•„ÅÆË≠∞‰∫ãÈå≤„ÅØ„ÄÅÁµÇ‰∫ÜÂæå„Å´ÂÖ±Êúâ„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ", en: "I will circulate the minutes of today's meeting afterwards." },
            { jp: "ÁöÜ„Åï„Çì„ÄÅ„ÅäÊèÉ„ÅÑ„Åß„Åó„Çá„ÅÜ„ÅãÔºüÂßã„ÇÅ„Åæ„Åó„Çá„ÅÜ„ÄÇ", en: "Is everyone here? Let's get started." },
            { jp: "„Éû„Ç§„ÇØ„Çí„Éü„É•„Éº„Éà„Å´„Åó„Å¶„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÅãÔºü", en: "Could you please mute your microphone?" },
            { jp: "Ê¨°„ÅÆ„Ç¢„Ç∏„Çß„É≥„ÉÄ„Å´ÈÄ≤„Åø„Åæ„Åó„Çá„ÅÜ„ÄÇ", en: "Let's move on to the next item on the agenda." },
            { jp: "„ÇÇ„ÅÜ‰∏ÄÂ∫¶„Åä„Å£„Åó„ÇÉ„Å£„Å¶„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÅãÔºü", en: "Could you say that again, please?" },
            { jp: "ÁîªÈù¢„ÅåÂõ∫„Åæ„Å£„Å¶„ÅÑ„Çã„Çà„ÅÜ„Åß„Åô„ÄÇ", en: "It seems your screen is frozen." },
            { jp: "Êú¨Êó•„ÅØ„ÅäÈõÜ„Åæ„Çä„ÅÑ„Åü„Å†„Åç„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ", en: "Thank you all for joining us today." },
            { jp: "„ÉÅ„É£„ÉÉ„ÉàÊ¨Ñ„Å´„É™„É≥„ÇØ„ÇíË≤º„Çä„Åæ„Åó„Åü„ÄÇ", en: "I've posted the link in the chat box." },
            { jp: "‰ªä„ÅÆÁô∫Ë®Ä„ÅØ„ÄÅÁßÅ„ÅÆÂÄã‰∫∫ÁöÑ„Å™Ë¶ãËß£„Åß„Åô„ÄÇ", en: "What I just said is my personal view." },
            { jp: "„Åù„ÅÆ‰ª∂„ÅØÊ¨°Âõû„ÅÆ‰ºöË≠∞„ÅßË≠∞Ë´ñ„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ", en: "Let's discuss that matter in the next meeting." },
            { jp: "ÊåÅ„Å°Â∏∞„Å£„Å¶Ê§úË®é„Åó„ÄÅÊòéÊó•„ÅäËøî‰∫ã„Åó„Åæ„Åô„ÄÇ", en: "I'll take that back, look into it, and get back to you tomorrow." },
            { jp: "„Çπ„É©„Ç§„Éâ„ÅåË¶ã„Åà„Åæ„Åô„ÅãÔºü", en: "Can you see the slides?" },
            { jp: "ÊôÇÈñì„Åå„Å™„ÅÑ„ÅÆ„Åß„ÄÅÊâãÁü≠„Å´„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô„ÄÇ", en: "We're running out of time, so please be brief." },
            { jp: "Ë¶ÅÁÇπ„Çí„Åæ„Å®„ÇÅ„Çã„Å®‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åô„ÄÇ", en: "To wrap up, the main points are as follows." },
            { jp: "„Å©„Å™„Åü„Åã‰ªñ„Å´ÊÑèË¶ã„ÅØ„ÅÇ„Çä„Åæ„Åô„ÅãÔºü", en: "Does anyone else have anything to add?" },
            { jp: "„Åì„Çå„Å´„Å¶Êú¨Êó•„ÅÆ‰ºöË≠∞„ÇíÁµÇ‰∫Ü„Åó„Åæ„Åô„ÄÇ", en: "This concludes our meeting for today." }
        ].concat(Array.from({length: 80}, (_, i) => ({
            jp: `Web‰ºöË≠∞„ÅÆ„Éà„É©„Éñ„É´„ÉªÈÄ≤Ë°å„Éï„É¨„Éº„Ç∫${i+1}Ôºö„Ç™„É≥„É©„Ç§„É≥ÁâπÊúâ„ÅÆË°®Áèæ„ÄÇ`,
            en: `Online meeting and troubleshooting phrase ${i+1}: Useful for virtual communication.`
        }))),

        daily: [
            { jp: "È£ØÁî∞Ê©ãÈßÖ„Åã„ÇâÊù±‰∫¨ÈßÖ„ÅØ„ÄÅ„Åæ„ÅöÁ∑èÊ≠¶Á∑ö„Å´‰πó„Çä„ÄÅ„ÅäËå∂„ÅÆÊ∞¥ÈßÖ„Åß‰∏≠Â§ÆÁ∑ö„Å´‰πó„ÇäÊèõ„Åà„Åæ„Åô„ÄÇ", en: "To get from Iidabashi to Tokyo Station, first take the Sobu Line and then transfer to the Chuo Line at Ochanomizu Station." },
            { jp: "„Éû„É≥„Ç∑„Éß„É≥‰æ°Ê†º„ÅÆÈ´òÈ®∞„Å´„Çà„Çä„ÄÅË≥ºÂÖ•„ÅØ„ÇÇ„Å°„Çç„ÇìË≥ÉË≤∏‰æ°Ê†º„ÇÇ‰∏äÊòá„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÁâπ„Å´Â≠êËÇ≤„Å¶‰∏ñÂ∏Ø„Å´„Å®„Å£„Å¶„ÅÆÂïèÈ°å„ÅØ„ÄÅ„Éï„Ç°„Éü„É™„ÉºÂêë„ÅëÁâ©‰ª∂„ÅÆ‰æõÁµ¶Êï∞„ÅåÂ∞ë„Å™„ÅÑ„Åì„Å®„Åß„Åô„ÄÇ", en: "Due to the soaring prices of apartments, not only purchase prices but also rental costs are on the rise. A particular problem for families with children is the limited supply of family-oriented properties." },
            { jp: "„Åì„ÅÆË∑ØÁ∑ö„ÅÆ„É©„ÉÉ„Ç∑„É•„Ç¢„ÉØ„Éº„ÅØÈùûÂ∏∏„Å´Ê∑∑Èõë„Åó„ÄÅ„Åó„Å∞„Åó„Å∞ÈÅÖÂª∂„ÅåÁô∫Áîü„Åó„Åæ„Åô„ÄÇ", en: "The rush hour on this line is extremely crowded, and delays occur frequently." },
            { jp: "ÊúÄÂØÑ„ÇäÈßÖ„Åæ„ÅßÂæíÊ≠©ÂúèÂÜÖ„Åß„ÄÅÂë®Ëæ∫„Å´„ÅØ„Çπ„Éº„Éë„Éº„ÇÇ„ÅÇ„Çä‰æøÂà©„Åß„Åô„ÄÇ", en: "It's within walking distance of the nearest station, and having supermarkets nearby makes it very convenient." },
            { jp: "ÊúÄËøë„ÄÅÈ¶ñÈÉΩÂúè„ÅÆ‰∏çÂãïÁî£Â∏ÇÂ†¥„ÅØ„Éê„Éñ„É´„ÅÆ„Çà„ÅÜ„Å™Áä∂ÊÖã„Å†„Å®Ë®Ä„Çè„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ", en: "It is often said that the real estate market in the metropolitan area has been in a bubble-like state recently." },
            { jp: "ÊúÄËøë„ÄÅ‰ªï‰∫ã„Å®ÁßÅÁîüÊ¥ª„ÅÆ„Éê„É©„É≥„Çπ„ÇíÂèñ„Çã„ÅÆ„Å´Ëã¶Âä¥„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ", en: "I've been struggling to strike a balance between work and my personal life lately." },
            { jp: "„Åù„Çå„ÅØÁßÅ„Å´„Å®„Å£„Å¶„ÄÅ„Å®„Å¶„ÇÇÊÑüÊÖ®Ê∑±„ÅÑÂá∫Êù•‰∫ã„Åß„Åó„Åü„ÄÇ", en: "That was a very poignant and emotional experience for me." },
            { jp: "ÂΩº„ÅÆÊ±∫Êñ≠„Å´„ÅØ„ÄÅ„ÅÇ„ÇãÁ®ãÂ∫¶„ÅÆÂ¶•Âçî„ÅåÂøÖË¶Å„Åß„Åó„Åü„ÄÇ", en: "His decision required a certain amount of compromise." },
            { jp: "‰∏ÄÊ¶Ç„Å´„Å©„Å°„Çâ„ÅåËâØ„ÅÑ„Å®„ÅØË®Ä„Åà„Åæ„Åõ„Çì„ÄÇ", en: "You cannot say definitively which one is better." },
            { jp: "„Åì„Çå„Åæ„Åß„ÅÆÂä™Âäõ„Åå„Çà„ÅÜ„ÇÑ„ÅèÂÆü„ÇíÁµê„Å≥„Åæ„Åó„Åü„ÄÇ", en: "All the hard work has finally come to fruition." },
            { jp: "Èõ®„ÅåÈôç„Çä„Åù„ÅÜ„Å™„ÅÆ„Åß„ÄÅÂÇò„ÇíÊåÅ„Å£„Å¶„ÅÑ„Å£„ÅüÊñπ„Åå„ÅÑ„ÅÑ„Åß„Åô„Çà„ÄÇ", en: "It looks like it's going to rain, so you'd better take an umbrella." },
            { jp: "ÂΩº„Å®„ÅØÂÅ∂ÁÑ∂„ÄÅÈßÖ„ÅßË¶ã„Åã„Åë„Åæ„Åó„Åü„ÄÇ", en: "I happened to see him at the station." },
            { jp: "„ÅÇ„Å™„Åü„ÅÆË¶™Âàá„Å´ÂøÉ„Åã„ÇâÊÑüË¨ù„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ", en: "I'm truly grateful for your kindness." },
            { jp: "„Åù„Çå„ÅØÂçò„Å™„ÇãË™§Ëß£„Å†„Å®ÊÄù„ÅÑ„Åæ„Åô„ÄÇ", en: "I believe that is merely a misunderstanding." },
            { jp: "ÂÅ•Â∫∑„ÅÆ„Åü„ÇÅ„Å´ÈáéËèú„Çí„Åü„Åè„Åï„ÇìÈ£ü„Åπ„Çã„Çà„ÅÜ„Å´„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ", en: "I make it a point to eat a lot of vegetables for my health." },
            { jp: "Êñ∞„Åó„ÅÑ„Åì„Å®„Å´ÊåëÊà¶„Åô„Çã„ÅÆ„ÅØÂãáÊ∞ó„Åå„ÅÑ„Çä„Åæ„Åô„ÄÇ", en: "It takes courage to try something new." },
            { jp: "ÂΩº„ÅØ„Å®„Å¶„ÇÇÊ∞ó„Åï„Åè„Å™‰∫∫„Åß„Åô„ÄÇ", en: "He is a very easygoing person." },
            { jp: "„Åì„ÅÆÊú¨„ÅØË™≠„ÇÄ‰æ°ÂÄ§„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ", en: "This book is well worth reading." },
            { jp: "ÈÄ±Êú´„ÅØ„ÇÜ„Å£„Åè„Çä‰ºë„ÇÄ„Å§„ÇÇ„Çä„Åß„Åô„ÄÇ", en: "I intend to take it easy this weekend." },
            { jp: "„Åæ„Åü„Åä‰ºö„ÅÑ„Åß„Åç„Çã„ÅÆ„ÇíÊ•Ω„Åó„Åø„Å´„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ", en: "I'm looking forward to seeing you again." }
        ].concat(Array.from({length: 80}, (_, i) => ({
            jp: `Êó•Â∏∏ÁîüÊ¥ª„ÅÆÈ´òÂ∫¶„Å™Ë°®Áèæ${i+1}ÔºöË™ûÂΩô„ÇíÂ∫É„Åí„Åæ„Åó„Çá„ÅÜ„ÄÇ`,
            en: `Advanced daily expression ${i+1}: Expanding your vocabulary.`
        }))),

        news: [
            { jp: "ÂÖàÊó•„ÅÆË°ÜË≠∞Èô¢ÈÅ∏Êåô„ÅßÂ§ßÂãù„Åó„ÅüÈ´òÂ∏ÇÂÜÖÈñ£„ÅØÂúßÂÄíÁöÑÂ§öÊï∞„ÅÆ‰∏éÂÖö„Å®„Å™„Çä„Åæ„Åó„Åü„ÄÇ", en: "The Takaichi Cabinet, which won a landslide victory in the recent lower house election, now commands an overwhelming majority as the ruling party." },
            { jp: "ÂêÑÂõΩ„Åß„ÄÅ‰∏ñ‰ª£Èñì„ÉªÂÆóÊïôË¶≥„ÅÆÂàÜÊñ≠„ÅåÈÄ≤„Çì„Åß„ÅÑ„Åæ„Åô„ÄÇ", en: "Divisions across generations and religious views are widening in many countries." },
            { jp: "Á§æ‰ºö„ÅÆ‰∫åÊ•µÂåñ„ÅØ„ÄÅÊ∞ë‰∏ª‰∏ªÁæ©„ÅÆÂÆâÂÆö„Å´ÂØæ„Åô„ÇãÈáçÂ§ß„Å™ËÑÖÂ®Å„Å®„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ", en: "The polarization of society has become a significant threat to the stability of democracy." },
            { jp: "ÊîøÊ≤ªÁöÑÂÆâÂÆö„ÅØÊäïË≥á„ÇíÂëº„Å≥Ëæº„ÇÄ„Åü„ÇÅ„ÅÆÈáçË¶Å„Å™Èçµ„Åß„Åô„ÄÇ", en: "Political stability is a key factor in attracting investment." },
            { jp: "ÊåÅÁ∂öÂèØËÉΩ„Å™Á§æ‰ºö„ÅÆÂÆüÁèæ„Å´Âêë„Åë„Å¶Âèñ„ÇäÁµÑ„ÇÄ„Åπ„Åç„Åß„Åô„ÄÇ", en: "We should strive towards achieving a sustainable society." },
            { jp: "„Ç§„É≥„Éï„É¨„ÅåÂä†ÈÄü„Åó„ÄÅÊ∂àË≤ªËÄÖ„ÅÆË≥ºË≤∑Âäõ„Å´ÂΩ±Èüø„Çí‰∏é„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ", en: "Accelerating inflation is affecting the purchasing power of consumers." },
            { jp: "AI„ÅÆÊÄ•ÈÄü„Å™Áô∫Â±ï„ÅØ„ÄÅÈõáÁî®Â∏ÇÂ†¥„ÇíÂÜçÁ∑®„Åô„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ", en: "The rapid advancement of AI has the potential to reshape the job market." },
            { jp: "Â§öÊßòÊÄß„Å®ÂåÖÊëÇÊÄß„ÅØ„ÄÅÁèæ‰ª£„ÅÆÁµÑÁπî„Å´„Åä„ÅÑ„Å¶‰∏çÂèØÊ¨†„Åß„Åô„ÄÇ", en: "Diversity and inclusion are essential in modern organizations." },
            { jp: "„Åù„ÅÆÊîøÁ≠ñ„ÅØ„ÄÅ‰∏ñË´ñ„Åã„ÇâÊøÄ„Åó„ÅÑÊâπÂà§„ÇíÊµ¥„Å≥„Åæ„Åó„Åü„ÄÇ", en: "The policy drew heavy criticism from public opinion." },
            { jp: "Ê∞óÂÄôÂ§âÂãï„ÅØÂú∞ÁêÉË¶èÊ®°„ÅÆË™≤È°å„Åß„Åô„ÄÇ", en: "Climate change is a global challenge." },
            { jp: "ÂÜçÁîüÂèØËÉΩ„Ç®„Éç„É´„ÇÆ„Éº„Å∏„ÅÆËª¢Êèõ„ÅåÈÄ≤„Çì„Åß„ÅÑ„Åæ„Åô„ÄÇ", en: "The shift towards renewable energy is gaining momentum." },
            { jp: "„Çµ„Ç§„Éê„Éº„Çª„Ç≠„É•„É™„ÉÜ„Ç£„ÅÆÂº∑Âåñ„ÅåÊÄ•Âãô„Åß„Åô„ÄÇ", en: "Strengthening cybersecurity is an urgent priority." },
            { jp: "„Åù„ÅÆ‰ºÅÊ•≠„ÅØÂ∏ÇÂ†¥„Ç∑„Çß„Ç¢„ÇíÊã°Â§ß„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ", en: "The company is expanding its market share." },
            { jp: "Â∞ëÂ≠êÈ´òÈΩ¢Âåñ„ÅØÊ∑±Âàª„Å™Á§æ‰ºöÂïèÈ°å„Åß„Åô„ÄÇ", en: "The declining birthrate and aging population is a serious social issue." },
            { jp: "ÁµåÊ∏àÊåáÊ®ô„Åå‰∫àÊ∏¨„Çí‰∏äÂõû„Çä„Åæ„Åó„Åü„ÄÇ", en: "Economic indicators exceeded expectations." },
            { jp: "„É™„É¢„Éº„Éà„ÉØ„Éº„ÇØ„ÅåÊñ∞„Åó„ÅÑÊ®ôÊ∫ñ„Å´„Å™„Çä„Å§„Å§„ÅÇ„Çä„Åæ„Åô„ÄÇ", en: "Remote work is becoming the new normal." },
            { jp: "ÂõΩÈöõÊÉÖÂã¢„ÅåÁ∑äËø´„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ", en: "The international situation is tense." },
            { jp: "ÊúÄÊñ∞ÊäÄË°ì„ÅåÂåªÁôÇÁèæÂ†¥„Å´Â∞éÂÖ•„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ", en: "Cutting-edge technology is being introduced to the medical field." },
            { jp: "Ê†ºÂ∑Æ„ÅÆÊã°Â§ß„ÅåÊá∏Âøµ„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ", en: "The widening gap of inequality is a cause for concern." },
            { jp: "ÊîøÂ∫ú„ÅØÊñ∞„Åó„ÅÑÁµåÊ∏àÂØæÁ≠ñ„ÇíÁô∫Ë°®„Åó„Åæ„Åó„Åü„ÄÇ", en: "The government announced a new economic package." }
        ].concat(Array.from({length: 80}, (_, i) => ({
            jp: `ÊôÇ‰∫ãÂïèÈ°å„Éª„Éà„É¨„É≥„Éâ${i+1}Ôºö„Éã„É•„Éº„Çπ„Åß„Çà„Åè‰Ωø„Çè„Çå„ÇãË™ûÂΩô„ÄÇ`,
            en: `News and current events phrase ${i+1}: Vocabulary often used in headlines.`
        })))
    };

    const categoryNames = {
        business: "üíº ËÅ∑Â†¥„Åß„ÅÆ‰ºöË©±",
        meeting: "üåê Web‰ºöË≠∞",
        daily: "üè† Êó•Â∏∏ÁîüÊ¥ª",
        news: "üìà ÊôÇ‰∫ã„Éª„Éà„É¨„É≥„Éâ"
    };

    let currentQueue = [];
    let currentQuestion = null;
    let totalAttempts = 0;
    let correctCount = 0;
    let audioEnabled = false;

    const japaneseEl = document.getElementById('japanese-text');
    const englishEl = document.getElementById('english-text');
    const controlsEl = document.getElementById('game-controls');
    const statRem = document.getElementById('stat-remaining');
    const statCor = document.getElementById('stat-correct');
    const categoryHeader = document.getElementById('current-category-name');

    const synth = window.speechSynthesis;

    function startGame(category) {
        document.getElementById('start-overlay').style.display = 'none';
        categoryHeader.innerText = categoryNames[category];
        audioEnabled = true;
        
        currentQueue = [...questionBank[category]].sort(() => Math.random() - 0.5);
        nextQuestion();
    }

    function nextQuestion() {
        if (currentQueue.length === 0) {
            finishGame();
            return;
        }

        currentQuestion = currentQueue[0];
        japaneseEl.innerText = currentQuestion.jp;
        englishEl.innerText = currentQuestion.en;
        englishEl.style.display = 'none';
        controlsEl.style.visibility = 'hidden';
        
        updateStats();
    }

    function showAnswer() {
        if (!currentQuestion || englishEl.style.display === 'block') return;
        
        englishEl.style.display = 'block';
        controlsEl.style.visibility = 'visible';
        
        if (audioEnabled) {
            const utter = new SpeechSynthesisUtterance(currentQuestion.en);
            utter.lang = 'en-US';
            utter.rate = 0.85;
            synth.cancel();
            synth.speak(utter);
        }
    }

    function handleResult(isCorrect) {
        totalAttempts++;
        if (isCorrect) {
            correctCount++;
            currentQueue.shift();
        } else {
            const wrongItem = currentQueue.shift();
            currentQueue.push(wrongItem);
        }
        nextQuestion();
    }

    function updateStats() {
        statRem.innerText = currentQueue.length;
        statCor.innerText = correctCount;
    }

    function finishGame() {
        const resultScreen = document.getElementById('result-screen');
        const finalRate = document.getElementById('final-rate');
        const finalStats = document.getElementById('final-stats');
        const feedback = document.getElementById('feedback-msg');

        resultScreen.style.display = 'flex';
        
        const rate = totalAttempts === 0 ? 0 : Math.round((correctCount / totalAttempts) * 100);
        finalRate.innerText = rate + "%";
        finalStats.innerText = `Total Attempts: ${totalAttempts} / Correct: ${correctCount}`;

        if (rate >= 90) feedback.innerText = "Excellent! You've mastered these phrases.";
        else if (rate >= 70) feedback.innerText = "Great job! Keep practicing.";
        else feedback.innerText = "Good effort. Let's try again for a higher score.";
    }
</script>
</body>
</html>